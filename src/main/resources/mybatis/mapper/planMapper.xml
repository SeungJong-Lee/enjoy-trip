<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.enjoytrip.plan.repository.PlanRepository">

  <!--  <insert id="insertPlan" useGeneratedKeys="true">-->
  <!--    INSERT INTO trip_plan (user_id, plan_title) value (#{userId}, #{planWriteRequestDto.planTitle})-->
  <!--    <selectKey order="AFTER" resultType="int">-->
  <!--      SELECT LAST_INSERT_ID()-->
  <!--    </selectKey>-->
  <!--  </insert>-->

  <insert id="insertPlan" parameterType="map" useGeneratedKeys="true" keyColumn="plan_id"
    keyProperty="planId">
    INSERT INTO trip_plan (user_id, plan_title)
    VALUES (#{userId},
            #{planTitle});
  </insert>

  <insert id="insertPlanDetail" parameterType="map">
    INSERT INTO trip_plan_detail(plan_id, content_id, priority) VALUES
    <foreach collection="contentIdList" item="contentId" index="index" separator=",">
      (#{planId}, #{contentId}, #{index})
    </foreach>
  </insert>
</mapper>